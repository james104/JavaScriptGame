<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

   <script type="text/javascript">

    </script>

</head>
<body>
<!--<img id="player" class="character" src="img/woody_s.bmp" style="left:0px;top:0px;position:absolute;">-->
<div id="gameStatus">
    <div id="gameTime">00:00</div>
</div>
<canvas id="gameCanvas" width="1500" height="500">

</canvas>

<script type="text/javascript">
    //canvas
    var canvasElement = document.getElementById("gameCanvas");
    var ctx = canvasElement.getContext && canvasElement.getContext('2d');
    ctx.fillStyle = "#FFFF00";
    ctx.fillRect(0,200,1500,300);
    
    backgroudImage = new Image();
    backgroudImage.id = "backgroundImage";
    backgroudImage.src = "img/floor3.bmp";
    backgroudImage.onload = drawInCanvas("background",ctx,backgroudImage);

    playerImage = new Image();
    playerImage.id = "playerImage";
    playerImage.src = "img/woody_s.bmp";
    playerImage.onload = drawInCanvas("player",ctx,playerImage);
    
    function drawInCanvas(drawType,canvas,image,x=0,y=300){
        if(drawType == "background"){
            canvas.drawImage(image,0,0);
        }else if(drawType == "player"){
            canvas.drawImage(image,x,y);
        }else if(drawType == "npc"){
            canvas.drawImage(image,18,5,41,75,100,100,41,75);
        }
    }


    //game status
    var timerMin = 0;
    var timerSec = 0;
  
    setInterval(timerFunction,1000);
    
    function timerFunction(){
        timerSec += 1;
        if(timerSec == 60){
            timerMin++;
            timerSec = 0;
        }
        if(timerSec < 10){
            var lessThanTenSec = "0";
        }else{
            var lessThanTenSec = "";
        }
        if(timerMin < 10){
            var lessThanTenMin = "0";
        }else{
            var lessThanTenMin = "";
        }
        document.getElementById("gameTime").innerText = lessThanTenMin + timerMin + ":" + lessThanTenSec + timerSec;
    }


    //player
    var keyStatus = [];    
    var playerObject = new playerObject();

    function playerObject(){
        this.speed = 5;
        this.x = 0;
        this.y = 300;
    }

    setInterval(checkActionMove, 20);
    
    document.onkeydown = function(key){
        keyStatus[key.keyCode] = true;
    };

    document.onkeyup = function(key){
        delete keyStatus[key.keyCode];
    };

    function checkActionMove(){
        if (keyStatus[37]){//left
            //console.log("37"+ keyStatus[37]);
            //player.style.left = (parseInt(player.style.left) - 5) + "px";
            ctx.clearRect(playerObject.x,playerObject.y,playerImage.width,playerImage.height);
            playerObject.x -= playerObject.speed;
            drawInCanvas("player",ctx,playerImage,playerObject.x,playerObject.y);
        }
        if (keyStatus[38]){//up
            //console.log("38"+ keyStatus[38]);
            //player.style.top = (parseInt(player.style.top) - 5) + "px";
            ctx.clearRect(playerObject.x,playerObject.y,playerImage.width,playerImage.height);
            playerObject.y -= playerObject.speed;
            drawInCanvas("player",ctx,playerImage,playerObject.x,playerObject.y);
        }
        if (keyStatus[39]){//right
            //console.log("39"+ keyStatus[39]);
            //player.style.left = (parseInt(player.style.left) + 5) + "px";
            ctx.clearRect(playerObject.x,playerObject.y,playerImage.width,playerImage.height);
            playerObject.x += playerObject.speed;
            drawInCanvas("player",ctx,playerImage,playerObject.x,playerObject.y);
        }
        if (keyStatus[40]){//down
            //console.log("40"+ keyStatus[40]);
            //player.style.top = (parseInt(player.style.top) + 5) + "px";
            ctx.clearRect(playerObject.x,playerObject.y,playerImage.width,playerImage.height);
            playerObject.y += playerObject.speed;
            drawInCanvas("player",ctx,playerImage,playerObject.x,playerObject.y);
        }
        
    }
</script>

</body>
</html>